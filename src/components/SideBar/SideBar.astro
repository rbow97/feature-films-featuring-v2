---
import TaggedColumn from "../homepage/TaggedColumn";
---

<sidebar-wrapper>
  <div
    class="h-svh shrink-0 ptXL prMedium sticky top-0 flexCol min-w-60 border-r border-primary-blue"
  >
    <header>
      <a
        class="w-fit gapxSmall flexCol justify-start items-start mbSmall"
        href="/people"
        id="header-link"
      >
        <img class="h-[40px]" src="/film-camera.svg" />
        <h1 class="text-heading text-primary-blue font-oswald font-semibold">
          FEATURE FILMS,
          <br />
          FEATURING
        </h1>
      </a>
    </header>
    <form action="/credits" method="POST">
      <div class="flex justify-between h-fit items-center">
        <h3 class="text-text text-primary-black font-bold">TAGGED</h3>
        <button
          class="text-buttonSmall rounded-lg border h-fit border-primary-black pxSmall pyXS"
          id="search-button"
          type="submit">Submit</button
        >
      </div>
      <ul class="flexCol gapxXS">
        <TaggedColumn client:load />
      </ul>
    </form>
  </div>
</sidebar-wrapper>

<script>
  import { currentTaggedAndCredits } from "../../stores/newSystem";
  import { currentDisplayedResults } from "../../stores/taggingSystemStore";

  class SidebarWrapper extends HTMLElement {
    constructor() {
      super();
      const headerLink = this.querySelector("#header-link");

      // TODO: this cant be null
      headerLink?.addEventListener("click", (e) => {
        currentDisplayedResults.set([]);
        currentTaggedAndCredits.set(null);
      });
    }
  }
  customElements.define("sidebar-wrapper", SidebarWrapper);
</script>
