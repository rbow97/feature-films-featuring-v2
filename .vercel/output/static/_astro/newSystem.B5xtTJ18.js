let l=[],a=(o,h)=>{let s=[],t={get(){return t.lc||t.listen(()=>{})(),t.value},l:0,lc:0,listen(i,n){return t.lc=s.push(i,n||t.l)/2,()=>{let u=s.indexOf(i);~u&&(s.splice(u,2),--t.lc||t.off())}},notify(i,n){let u=!l.length;for(let e=0;e<s.length;e+=2)l.push(s[e],s[e+1],t.value,i,n);if(u){for(let e=0;e<l.length;e+=5){let r;for(let f=e+1;!r&&(f+=5)<l.length;)l[f]<l[e+1]&&(r=l.push(l[e],l[e+1],l[e+2],l[e+3],l[e+4]));r||l[e](l[e+2],l[e+3],l[e+4])}l.length=0}},off(){},set(i){let n=t.value;n!==i&&(t.value=i,t.notify(n))},subscribe(i,n){let u=t.listen(i,n);return i(t.value),u},value:o};return t};const c=a([]),g=a("");export{a,g as r,c as t};
